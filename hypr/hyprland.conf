# This is a Hyprland config file edited by egnrse.
#
# Refer to the hyprland wiki or the egnrse/configs git for more information.
# https://wiki.hyprland.org/Configuring/
# https://github.com/egnrse/configs
#
# This config uses the 'Universal Wayland Session Manager' (uwsm) and will not work with out this dependency (select/use the 'hyprland (uwsm managed)' desktop entry)
# https://github.com/Vladimir-csp/uwsm
# See https://wiki.hyprland.org/Useful-Utilities/Systemd-start/
# tl;dr: when starting apps add `uwsm app -- {launch command}`

# This config is split into multiple parts:
# - hyprland.conf (this file): the main config
# - look-feel.conf:		look and feel settings (includes many general behaviour settings) 
# - window-rules.conf:	rules on how windows/layers/workspaces/apps behave
# - maps.conf:			keyboard mappings (excluding plugins)
# - plugins.conf:		handle all plugin stuff (including plugin keymappings)

# You can create your files separately and then link them to this file like this:
# source = ~/.config/hypr/custom.conf


autogenerated=0		# to disable the warning

# the root dir for log files (of this config)
$logPath = $HOME/.config

#debug:disable_logs = false	# for debugging

###################
### MY PROGRAMS ###
###################
# See https://wiki.hyprland.org/Configuring/Keywords/

## Set programs that you use
#$terminal = alacritty
$terminal = uwsm app -- alacritty
$fileManager = uwsm app -- dolphin		# alternative: nautilus -w
$menu =	tofi-drun 						# app launcher
$menuClose = pkill tofi					# close app launcher	
$drawer = nwg-drawer
# close drawer if it is open
$drawerClose = test -n "$(hyprctl layers | grep nwg-drawer)" && nwg-drawer -close

$powerMenu = $HOME/.local/share/bin/scripts/logoutlaunch.sh 2	# 2: theme; 1: another theme
$sysMonitor = xdg-terminal-exec btm	# monitor system resources (u can also use top)
$onScreenKeyboard = uwsm app -- wvkbd-laptop
$onScreenKeyboardClose = pkill wvkbd

# GUI window switcher
$windowSwitchInit = uwsm app -- hyprswitch init --show-title --size-factor 6 --workspaces-per-row 3 --custom-css $HOME/.config/hyprswitch/style.css >> $logPath/hyprswitch/hyprswitch.log 2>&1 
$windowSwitchRun = hyprswitch gui --mod-key $mainMod --key $key --max-switch-offset 0 --include-special-workspaces --switch-type workspace


#################
### AUTOSTART ###
#################

# Autostart necessary processes (like notifications daemons, status bars, etc.)
# Or execute your favorite apps at launch like this:

# hyprpaper:wallpaper, dunst:notifications, 
#exec-once = uwsm app -- hyprpaper
exec-once = uwsm app -- dunst >> $logPath/dunst/dunst.log 2>&1
# polkit-kde-agent:authentificationManager
exec-once = uwsm app -- /usr/lib/polkit-kde-authentication-agent-1
# waybar:statusbar
#exec-once = uwsm app -- waybar >> /home/elia/waybar.log
#exec-once = uwsm exec sleep 2 && waybar >> /home/elia/waybar.log 2>&1
exec-once = waybar >> $logPath/waybar/waybar.log 2>&1 

# loudness change notifications
exec-once = uwsm app -- pa-notify
# bluelight filter
exec-once = uwsm app -- hyprsunset
# GUI window switcher
exec-once = $windowSwitchInit

# background instance of nwg-drawer
#exec-once = nwg-drawer -r
#-fm: filemanager, -nofs : no filesearch
exec-once = uwsm app -- nwg-drawer -r -c 8 -spacing 10 -fm dolphin -term $TERMINAL -wm 'hyprland' -nofs >> $logPath/nwg-drawer/nwg-drawer.log 2>&1

# syncthing tray
exec-once = uwsm app -- syncthingtray-qt6 --wait >> $logPath/log/syncthingtray.log 2>&1

# background service for kdeconnect
#exec-once = uwsm app -- kdeconnectd >> $logPath/kdeconnect/kdeconnect.log 2>&1
exec-once = uwsm app -- kdeconnect-indicator >> $logPath/kdeconnect/kdeconnect.log 2>&1

# start session with an open terminal (on ws 1)
exec-once = hyprctl dispatch workspace 1 && $terminal

# other examples:
# exec-once = nm-applet &
# exec-once = waybar & hyprpaper & firefox


#############################
### ENVIRONMENT VARIABLES ###
#############################
# See https://wiki.hyprland.org/Configuring/Environment-variables/

# nvidia
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = __GL_GSYNC_ALLOWED,0
env = __GL_VRR_ALLOWED,0

# xcursor
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24

################
### MONITORS ###
################
# See https://wiki.hyprland.org/Configuring/Monitors/

# laptop monitor with 1.2 times scaling
# pc monitor with 1.666666 scaling
# monitor=name, resolution@Hz, placing, scaling
# see hyprclt monitors
monitor=eDP-1,preferred,auto,1.2		# laptop monitor
monitor=DP-1,3840x2160@120,auto,1.67		# pc main monitor
monitor=HDMI-A-1,preferred,-1920x190,1		# pc monitor 2
monitor=desc: BOE 0x0BC,preferred,auto,1.3333	# archFrame monitor
#monitor=DP-1,preferred,auto,1.666666

# custom reserved screen area
# monitor = name, addreserved, TOP, BOTTOM, LEFT, RIGHT
#monitor=DP-1,addreserved,0,0,0,4

# all other monitor do automatically
monitor=,preferred,auto,1

## other options:
# monitor = name, disable
# monitor = , preferred, auto, 1, mirror, DP-1

#############
### INPUT ###
#############
# https://wiki.hyprland.org/Configuring/Variables/#input

input {
	kb_layout = us
	kb_variant = intl
	kb_model =

	# map capslock to escape
	kb_options = caps:escape
	kb_rules =
	numlock_by_default = true

	follow_mouse = 1		# (window) focus follows the mouse

	sensitivity = 0 		# -1.0 - 1.0, 0 means no modification.
	accel_profile = adaptive 	# adaptive/flat/custom

	off_window_axis_events = 2 	# what to do with events around gaps/border/dragarea
	# 0: ignores events, 1: out-of-bound coordinates, 2: fakes closest inside coordinates, 3: warps the cursor to the closest point inside the window

	touchpad {
		disable_while_typing = true
		natural_scroll = true	# invert scrolling direction on touchpads
	}
	touchdevice {
		# DISABLES TOUCH DEVICES
		enabled = false
	}
}

cursor {
	no_hardware_cursors = 2 	# disables hardware cursors. Set to 2 for auto which disables them on Nvidia, while keeping them enabled otherwise.
	hotspot_padding = 1			# the padding, in logical px, between screen edges and the cursor
	inactive_timeout = 0 		# in seconds, after how many seconds of cursorâ€™s inactivity to hide it. Set to 0 for never. (float)
	persistent_warps = false	# When a window is refocused, the cursor returns to its last position relative to that window, rather than to the centre.
	zoom_factor = 1.0			# magnifying glass. Minimum 1.0 (meaning no zoom)
	#default_monitor =			# the name of a default monitor for the cursor to be set to on startup 
	enable_hyprcursor = true
	hide_on_key_press = false
	hide_on_touch = true
	warp_back_after_non_mouse_input = false	# Warp the cursor back to where it was after using a non-mouse input to move it, and then returning back to mouse.
}


## per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs for more
# device names with `hyprctl devices`

# mouse at home
device {
	name = logitech-gaming-mouse-g402
	sensitivity = -0.37
}


#####################
### LOOK AND FEEL ###
#####################
source = ~/.config/hypr/look-feel.conf

##############################
### WINDOWS AND WORKSPACES ###
##############################
source = ~/.config/hypr/window-rules.conf

###################
### KEYBINDINGS ###
###################
source = ~/.config/hypr/maps.conf

###############
### PLUGINS ###
###############
source = ./plugins.conf

###################
### Permissions ###
###################
# See https://wiki.hypr.land/Configuring/Permissions/
ecosystem:enforce_permissions = true
permission = *, screencopy, ask
permission = *, plugin, ask
#permission = *, keyboard, ask
permission = /usr/bin/hyprlock, screencopy, allow


## uwsm can take the environment-variables from hypr now
exec-once = uwsm finalize GBM_BACKEND __GLX_VENDOR_LIBRARY_NAME __GL_GSYNC_ALLOWED __GL_VRR_ALLOWED
