# The window/layers/... rules for this hyprland config.
# The main-config file is `hyprland.conf`
#
# Refer to the hyprland wiki or the egnrse/.config git for more information.
# https://wiki.hyprland.org/Configuring/
# https://github.com/egnrse/configs


##############################
### WINDOWS AND WORKSPACES ###
##############################
# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more
# See https://wiki.hyprland.org/Configuring/Workspace-Rules/ for workspace rules

## some workspace filters:
# w[tv1] : one tiled visible window
# w[tg1] : one tiled group
# f[1] : maximized
# f[0] : fullscreen

# Example windowrule (previously v2)
# windowrule = float on,match:class ^(kitty)$,match:title ^(kitty)$


# customized version of "Smart gaps" / "No gaps when only"
workspace = w[tv1], gapsout:0, gapsin:0
workspace = w[tg1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0

windowrule {
	name = borderless if only 1 tiling window
	match:workspace = w[t1]
	match:float = 0
	border_size = 0
}
windowrule {
	name = borderless if only 1 tiling group
	match:workspace = w[tg1]
	border_size = 0
}
windowrule {
	name = borderless/no rounding if maximized
	match:workspace = f[1]
	border_size = 0
	rounding = 0
}

# Ignore maximize requests from apps. You'll probably like this.
windowrule = suppress_event maximize, match:class .*

windowrule {
	name = Fix some dragging issues with XWayland
	match:class = ^$
	match:title = ^$
	match:xwayland = 1
	match:fullscreen = 0
	match:pin = 0
	match:float = 1
	no_focus = on
}

# fix floating being too big (fix it to 1920x1080-20(for the waybar))
# still does not work? TODO
windowrule = max_size 1920 1060, match:float 1, match:fullscreen 0

# fix very small initial window sizes with some windows (not really though)
windowrule = size >100 >5%, match:class .*, match:float 1


###################
### LAYER RULES ###
###################

# blur layers
layerrule = blur on, match:namespace (.*)


##############################
### CUSTOMIZE APP/LAYER BEHAVIOR ###
##############################
# window/layer rules that are for specific apps/layers

# 'immediate': windows to allow tearing on (if they are the only thing on screen)
# see 'https://wiki.hyprland.org/Configuring/Tearing/'



## ====== steam (for "steam_proton" windows look bellow) ======

# everything, but the main window floats
windowrule = float on, match:class steam, match:title (Steam\b)?(.+)
windowrule = tile on, match:class steam, match:title Steam
# initial update window
windowrule = center on, match:class ^$, match:title ^Steam$
windowrule = size 400 129, match:class ^$, match:title ^Steam$
# fix very small notification popups
windowrule = size >20% >20%, match:class steam,  match:title notification(.*), match:float = 1
# center non notification popups
windowrule = center on, match:class ^(steam(.*))$, match:title negative:^(notification.*).*$|^$, match:float = 1
windowrule = size >20% >20%, match:class ^(steam(.*))$, match:title negative:^(notification.*).*$|^$, match:float = 1
# launch 'steam_app_(.*)' centered and bigger
windowrule = center on, match:class ^(steam_app_(.*))$
windowrule = size >50% >50%, match:class ^(steam_app_(.*))$

# warframe (steam)
windowrule = immediate on, match:title ^(Warframe)$, match:class ^(steam_app_(.*))$	# allow tearing (helps against stutters on nvidia)
#windowrule = tile on, match:title ^(Warframe)$, match:class ^(steam_app_(.*))$
windowrule = center on, match:title ^(Warframe)$, match:class ^(steam_app_(.*))$
windowrule = size 1050 645, match:title ^(Warframe)$, match:class ^(steam_app_(.*))$
#windowrule = fullscreen on, match:title ^(Warframe)$, match:class ^(steam_app_(.*))$

# Soulframe (steam)
#windowrule = unset on, match:class steam_app_0, match:title Soulframe
windowrule = immediate on, match:class steam_app_0, match:title Soulframe
windowrule = min_size 1030 640, match:class steam_app_0, match:title Soulframe
windowrule = max_size 1030 640, match:class steam_app_0, match:title Soulframe
windowrule = center on, match:class steam_app_0, match:title Soulframe


## ====== steam_proton / bottles ======

# ignore general steam_proton windows
#windowrule = unset on, match:class ^(steam_proton)$, match:xwayland 1
windowrule = no_max_size on, match:class ^(steam_proton)$, match:xwayland 1
#windowrule = tile on, match:class ^(steam_proton)$, match:xwayland 1
# group?
windowrule = size 980 550, match:class ^(steam_proton)$, match:title (Save Live Set As|Save|Open|Add Folder|Select (.*)folder).* match:xwayland 1

# ableton live 11 (running in bottles over steam_proton)
windowrule = tile on, match:class ^(steam_proton)$, match:title (.* - Ableton Live 11 Suite), match:xwayland 1
windowrule = move onscreen cursor -10 0 , match:class ^(steam_proton)$, match:title (), match:xwayland 1	# menus
windowrule = max_size 436 136, match:class ^(steam_proton)$, match:title (Export Audio\.\.\.)	# export popup
# VST plugins:
windowrule = size 1500 900, match:class ^(steam_proton)$, match:title (Vital).*, match:xwayland 1
windowrule = size 852 565, match:class ^(steam_proton)$, match:title (SPAN).*, match:xwayland 1
windowrule = size 1265 786, match:class ^(steam_proton)$, match:title (Phase Plant).*, match:xwayland 1
windowrule = size 907 565, match:class ^(steam_proton)$, match:title (FabFilter Pro-Q 3).*, match:xwayland 1
windowrule = size 860 625, match:class ^(steam_proton)$, match:title (FabFilter Pro-R).*, match:xwayland 1
windowrule = size 726 392, match:class ^(steam_proton)$, match:title (FabFilter Saturn).*, match:xwayland 1
windowrule = size 960 600, match:class ^(steam_proton)$, match:title (FabFilter Pro-L 2).*, match:xwayland 1
windowrule = size 748 475, match:class ^(steam_proton)$, match:title (FabFilter Pro-C 2).*, match:xwayland 1
windowrule = size 905 605, match:class ^(steam_proton)$, match:title (FabFilter Pro-MB).*, match:xwayland 1
windowrule = size 645 445, match:class ^(steam_proton)$, match:title (FabFilter Pro-DS).*, match:xwayland 1
windowrule = size 625 345, match:class ^(steam_proton)$, match:title (FabFilter Pro-G).*, match:xwayland 1
windowrule = size 1000 1250, match:class ^(steam_proton)$, match:title (BBC Symphony Orchestra).*, match:xwayland 1
windowrule = size 885 420, match:class ^(steam_proton)$, match:title (Keyzone Classic).*, match:xwayland 1
windowrule = size 505 525, match:class ^(steam_proton)$, match:title (FreeClip).*, match:xwayland 1
windowrule = size 725 465, match:class ^(steam_proton)$, match:title (Multiply).*, match:xwayland 1
windowrule = size 625 250, match:class ^(steam_proton)$, match:title (La Petite Excite).*, match:xwayland 1
windowrule = size 555 450, match:class ^(steam_proton)$, match:title (GSnap).*, match:xwayland 1
# other VST:
windowrule = size 500 490, match:class ^(steam_proton)$, match:title (BL-Denoiser).*, match:xwayland 1
windowrule = size 700 425, match:class ^(steam_proton)$, match:title (Goyo).*, match:xwayland 1
# does not work properly
windowrule = size 530 380, match:class ^(steam_proton)$, match:title (iZotope Vinyl).*, match:xwayland 1


## ====== Wine ======

windowrule = size 410 450, match:class winecfg.exe, match:title (Wine configuration)
windowrule = center on, match:class winecfg.exe, match:title (Wine configuration)
windowrule = size 390 430, match:class explorer.exe, match:title Properties for (.*)
windowrule = center on, match:class explorer.exe, match:title Properties for (.*)
windowrule = size >700 >400, match:class explorer.exe, match:title Desktop
windowrule = center on, match:class explorer.exe, match:title Desktop


## ====== Music ======

# Audacity
# exlude popups: match:title ^audacity$
windowrule = center on, match:class ^(Audacity)$, match:title negative:^audacity$
windowrule = size >20% >20%, match:class ^(Audacity)$, match:title negative:(^Save changes to .*|^audacity|^Audacity is starting up...$)
windowrule = size 244 102, match:class ^(Audacity)$, match:title ^Save changes to .*
windowrule = size 550 190, match:class ^(Audacity)$, match:title ^Audacity is starting up...$
windowrule = size 510 360, match:class ^(Audacity)$, match:title ^Automatic Crash Recovery$
windowrule = size 538 538, match:class ^(Audacity)$, match:title ^Export Audio$
windowrule = size 499 453, match:class ^(Audacity)$, match:title ^Edit Metadata Tags$
windowrule = size 670 661, match:class ^(Audacity)$, match:title ^Compressor - .*
windowrule = size 670 589, match:class ^(Audacity)$, match:title ^Limiter - .*


## ====== Documents ======

# LibreOffice
#(loading bar)
windowrule = center on, match:class ^$, match:title ^LibreOffice$, match:xwayland 1
windowrule = size 600 200, match:class ^$, match:title ^LibreOffice$, match:xwayland 1


## ====== Games ======

# Minecraft (prism-launcher)
windowrule = tile on, match:class ^(Minecraft(.*)), match:title ^(Minecraft(.*))
windowrule = size >20% >20%, match:class ^(Minecraft(.*)), match:title ^(Minecraft(.*))


## ====== Media ======

# ffplay
windowrule = center on, match:class ffplay
windowrule = tile on, match:class ffplay

# krita
windowrule = size 624 552, match:class ^(krita), match:title ^((.*) — Krita)
windowrule = center on, match:class ^(krita), match:title ^((.*) — Krita)
windowrule = size 614 651, match:class ^(krita), match:title ^(About Krita)
windowrule = center on, match:class ^(krita), match:title ^(About Krita)
# destroys popups, but fixes the initial screen
#windowrule = center on, match:class ^(krita), match:title ^(Krita)
#windowrule = size 855 480, match:class ^(krita), match:title ^(Krita)


## ====== OTHER ======


# firefox/waterfox PiP
windowrule = float on,match:class ^(firefox)$,match:title ^(Picture-in-Picture)$
windowrule = float on,match:class ^(waterfox.*)$,match:title ^(Picture-in-Picture)$
windowrule = float on,match:class ^(zen)$,match:title ^(Picture-in-Picture)$
# audio control
windowrule = float on,match:class ^(org.pulseaudio.pavucontrol)$
windowrule = float on,match:class ^com.saivert.pwvucontrol$
# bluetooth
windowrule = float on,match:class ^(blueman-manager)$
# vesktop/discord Popout
windowrule = float on,match:class ^(vesktop)$,match:initial_title ^(Discord Popout)$

# Godot (non editor window)
windowrule = center on, match:class negative:^(org.godotengine.Editor)$, match:initial_title ^(Godot)$
windowrule = size >50% >50%, match:class negative:^(org.godotengine.Editor)$, match:initial_title ^(Godot)$

# matlab
windowrule = tile on, match:class ^MATLAB R(\d{4})[[:alpha:]] - (.*)$, match:title ^MATLAB R(\d{4})[[:alpha:]] - (.*)$

# Questa Sim
windowrule = center on, match:class MtiDialog, match:title Restart
windowrule = size 210 254, match:class MtiDialog, match:title Restart
windowrule = center on, match:class Toplevel, match:title Save Format
windowrule = size 474 168, match:class Toplevel, match:title Save Format
windowrule = center on, match:class Dialog, match:title Error in Tcl Script
windowrule = size 500 180, match:class Dialog, match:title Error in Tcl Script
windowrule = center on, match:class Dialog, match:title Quit Vsim
windowrule = size 257 93, match:class Dialog, match:title Quit Vsim
windowrule = center on, match:class Dialog, match:title ^( )$
windowrule = size 300 115, match:class Dialog, match:title ^( )$



# ===== CUSTOM GUIs ======
# Uni
windowrule = size >590 >250, match:class Tk, match:title (Remote Place Assigner)
windowrule = center on, match:class Tk, match:title (Remote Place Assigner)
windowrule = tile on, match:class ffplay, match:title (out.ppm), match:xwayland 1
windowrule = tile on, match:class ffplay, match:title (.*[00-99].ppm), match:xwayland 1
windowrule = size >20% >20%, match:class ffplay, match:title out.ppm, match:xwayland 1
windowrule = tile on, match:class ffplay, match:title Stream - rtsp://(.*), match:xwayland 1
windowrule = size >20% >20%, match:class ffplay, match:title Stream - rtsp://(.*), match:xwayland 1



# testing
#windowrule = float on, match:class Alacritty
#windowrule = size <5% <5%, match:class Alacritty

#windowrule = tile on, match:class ^(org\.kde\.kdeconnect\.daemon)$, match:title ^(KDE Connect Daemon)$
#windowrule = no_initial_focus on, match:class ^(org\.kde\.kdeconnect\.daemon)$, match:title ^(KDE Connect Daemon)$
#windowrule = unset on, match:class ^(org\.kde\.kdeconnect\.daemon)$, match:title ^(KDE Connect Daemon)$
#windowrule = fullscreen_state 0, match:class ^(org\.kde\.kdeconnect\.daemon)$, match:title ^(KDE Connect Daemon)$
#windowrule = float on, match:class ^(org\.kde\.kdeconnect\.daemon)$, match:title ^(KDE Connect Daemon)$
#windowrule = size >100% >100%, match:class ^(org\.kde\.kdeconnect\.daemon)$, match:title ^(KDE Connect Daemon)$
#windowrule = decorate off, match:class ^(org\.kde\.kdeconnect\.daemon)$, match:title ^(KDE Connect Daemon)$
#windowrule = noblur on, match:class ^(org\.kde\.kdeconnect\.daemon)$, match:title ^(KDE Connect Daemon)$
#windowrule = nofocus on, match:class ^(org\.kde\.kdeconnect\.daemon)$, match:title ^(KDE Connect Daemon)$


#layerrule = blur on, nwg-drawer
#layerrule = blur on, waybar
#layerrule = blur on, launcher
